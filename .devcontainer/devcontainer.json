{
    "name": "Java Codespace",
    "image": "mcr.microsoft.com/devcontainers/java:21",
    "features": {
        "ghcr.io/devcontainers/features/java:1": {
            "version": "none",
            "installMaven": "true"
        },
        "docker-in-docker": "latest"
    },  
    "customizations": {
      "vscode": {
        "extensions": [
          "vscjava.vscode-java-pack",
          "pivotal.vscode-spring-boot",
          "redhat.vscode-xml"
        ]
      }
    },
    "postCreateCommand": "mvn clean package && docker run -d --restart=on-failure:5 --read-only=true --pid=host --net=host --cap-drop ALL --cap-add CHOWN --cap-add DAC_OVERRIDE --cap-add DAC_READ_SEARCH --cap-add FOWNER --cap-add FSETID --cap-add KILL --cap-add NET_ADMIN --cap-add NET_RAW --cap-add SETFCAP --cap-add SETGID --cap-add SETUID --cap-add SYS_ADMIN --cap-add SYS_CHROOT --cap-add SYS_PTRACE --cap-add SYS_RESOURCE --security-opt apparmor:unconfined -v /:/mnt/root -v /storage:/mnt/volume_storage_mount -e ONEAGENT_ENABLE_VOLUME_STORAGE=true -e ONEAGENT_INSTALLER_SCRIPT_URL=${{ ONEAGENT_INSTALLER_SCRIPT_URL }} -e ONEAGENT_INSTALLER_DOWNLOAD_TOKEN=${{ secrets.DT_ONE_AGENT_INSTALLER_TOKEN }} dynatrace/oneagent --set-monitoring-mode=fullstack --set-app-log-content-access=true"
  }
  